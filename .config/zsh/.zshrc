# ============================================================================#
# OGAS Zsh 配置入口（交互式专用）
# - 此文件仅在交互式 shell 中加载：
#   * 非交互式脚本只会读取 ~/.zshenv，不会执行本文件；
# - 职责：
#   1) 统一加载 functions/ 下的自定义函数；
#   2) 按顺序加载 rc.d/ 下的交互配置模块。
# ============================================================================#

# 仅在交互式 Shell 下加载（防止脚本模式被 alias、prompt 等污染）
if ! [[ -o interactive ]]; then
  return
fi

# ------------------- 自定义函数：functions/*.zsh -------------------
# - 将 proxy/yazi/tmp 等自定义函数集中在 functions/ 目录；
# - 本处统一加载，便于在 rc.d 的后续模块中直接使用这些函数。
if [ -d "$ZDOTDIR/functions" ]; then
  for f in "$ZDOTDIR"/functions/*.zsh; do
    [ -r "$f" ] && . "$f"
  done
fi

# ------------------- 交互配置模块：rc.d/*.zsh -------------------
# - 文件命名建议使用两位数字+描述（如 30-plugins.zsh），数字越小越先加载；
# - 在 rc.d 中扩展配置：新增一个以数字开头的 .zsh 文件即可被自动加载。
for f in "$ZDOTDIR/rc.d/"*.zsh; do
  [ -r "$f" ] && . "$f"
done

